# OP Trading Platform - Complete Environment Configuration
# Copy this to .env and update with your actual values

# ================================
# ENVIRONMENT CONFIGURATION
# ================================
ENV=development
DEBUG=true
LOG_LEVEL=INFO
VERSION=1.0.0

# ================================
# BROKER API CONFIGURATION (Zerodha Kite)
# ================================

# Kite Connect API Credentials (REQUIRED - Update these!)
KITE_API_KEY=your_api_key_here
KITE_API_SECRET=your_api_secret_here
KITE_ACCESS_TOKEN=your_access_token_here
KITE_REQUEST_TOKEN=your_request_token_here

# Kite API Settings
KITE_API_ROOT=https://api.kite.trade
KITE_LOGIN_URL=https://kite.zerodha.com/connect/login
KITE_SESSION_EXPIRY_HOOK=
KITE_MICRO_CACHE=true
KITE_POOL_SIZE=10
KITE_RATE_LIMIT=10
KITE_TIMEOUT=30

# Broker Risk Management
MAX_ORDERS_PER_SECOND=10
MAX_POSITION_SIZE=1000000
POSITION_TIMEOUT_SECONDS=300
ORDER_VALIDATION=true
PAPER_TRADING=false

# ================================
# DATABASE CONFIGURATION
# ================================

# InfluxDB Settings
INFLUXDB_URL=http://localhost:8086
INFLUXDB_ORG=op-trading
INFLUXDB_BUCKET=options-data
INFLUXDB_TOKEN=your_influxdb_token_here
INFLUXDB_USERNAME=admin
INFLUXDB_PASSWORD=your_influxdb_password
INFLUXDB_RETENTION_POLICY=30d
INFLUXDB_PRECISION=ms
INFLUXDB_BATCH_SIZE=1000
INFLUXDB_FLUSH_INTERVAL=10

# InfluxDB Optional Settings
INFLUXDB_SSL=false
INFLUXDB_VERIFY_SSL=true
INFLUXDB_TIMEOUT=30

# ================================
# REDIS CONFIGURATION
# ================================

# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_USERNAME=

# Redis Performance Settings
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=30.0
REDIS_SOCKET_CONNECT_TIMEOUT=30.0
REDIS_HEALTH_CHECK_INTERVAL=30
REDIS_RETRY_ON_TIMEOUT=true
REDIS_DECODE_RESPONSES=true

# Redis Cluster Settings (if using Redis Cluster)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381
REDIS_CLUSTER_REQUIRE_FULL_COVERAGE=false

# ================================
# DATA STORAGE CONFIGURATION
# ================================

# File Storage Paths
BASE_DATA_DIR=data
CSV_DATA_ROOT=data/csv_data
JSON_SNAPSHOTS_ROOT=data/json_snapshots
ANALYTICS_OUTPUT_ROOT=data/analytics
LOGS_ROOT=logs
BACKUP_ROOT=backups

# Data Processing Settings
ENABLE_INCREMENTAL=true
USE_MEMORY_MAPPING=true
COMPRESSION_ENABLED=false
COMPRESSION_LEVEL=6
ENABLE_ARCHIVAL=true
ARCHIVAL_AFTER_DAYS=30
MAX_FILE_SIZE_MB=100
ENABLE_DATA_VALIDATION=true

# CSV Configuration
CSV_BUFFER_SIZE=8192
CSV_WRITE_MODE=append
CSV_DELIMITER=,
CSV_QUOTE_CHAR="
CSV_ESCAPE_CHAR=\\
CSV_LINE_TERMINATOR=\n

# JSON Configuration
JSON_BUFFER_SIZE=16384
JSON_INDENT=2
JSON_ENSURE_ASCII=false

# ================================
# PERFORMANCE CONFIGURATION
# ================================

# Processing Performance
PROCESSING_BATCH_SIZE=1000
PROCESSING_MAX_WORKERS=8
MAX_MEMORY_USAGE_MB=2048
ENABLE_MULTIPROCESSING=true
WORKER_TIMEOUT_SECONDS=300
ENABLE_PERFORMANCE_MONITORING=true

# Collection Performance
COLLECTION_LOOP_INTERVAL=30
COLLECTION_BATCH_SIZE=500
COLLECTION_MAX_RETRIES=3
COLLECTION_RETRY_DELAY=1.0
COLLECTION_TIMEOUT=30

# Analytics Performance
ANALYTICS_BATCH_SIZE=1000
ANALYTICS_MAX_WORKERS=4
ANALYTICS_CACHE_SIZE=10000
ANALYTICS_STREAMING_ENABLED=true
ANALYTICS_EOD_ENABLED=true

# ================================
# API SERVICE CONFIGURATION
# ================================

# FastAPI Server Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false
API_ACCESS_LOG=true
API_PROXY_HEADERS=true

# API Security
API_SECRET_KEY=your_super_secret_key_here_change_this_in_production
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=30
API_REFRESH_TOKEN_EXPIRE_DAYS=7
CORS_ENABLED=true
CORS_ORIGINS=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=*

# API Rate Limiting
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_CALLS=100
API_RATE_LIMIT_PERIOD=60
API_RATE_LIMIT_PER_IP=true

# API Documentation
API_DOCS_URL=/docs
API_REDOC_URL=/redoc
API_OPENAPI_URL=/openapi.json
API_INCLUDE_IN_SCHEMA=true

# ================================
# MONITORING & HEALTH CONFIGURATION
# ================================

# Health Monitoring
HEALTH_CHECK_INTERVAL=30
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_TIMEOUT=10
AUTO_RESTART_ENABLED=true
MAX_RESTART_ATTEMPTS=3
RESTART_DELAY_SECONDS=60

# System Monitoring
ENABLE_SYSTEM_MONITORING=true
SYSTEM_METRICS_INTERVAL=60
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
NETWORK_ALERT_THRESHOLD=80

# Application Monitoring
ENABLE_APPLICATION_MONITORING=true
ERROR_RATE_THRESHOLD=0.05
RESPONSE_TIME_THRESHOLD=5000
DATA_FRESHNESS_THRESHOLD=300

# Alerting Thresholds
ALERT_DATA_FRESHNESS_MINUTES=5
ALERT_PROCESSING_DELAY_MINUTES=2
ALERT_ERROR_RATE_THRESHOLD=0.10
ALERT_MEMORY_USAGE_THRESHOLD=0.85
ALERT_DISK_USAGE_THRESHOLD=0.90

# ================================
# EMAIL NOTIFICATION CONFIGURATION
# ================================

# SMTP Settings (for alerts and notifications)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USE_SSL=false
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_TIMEOUT=30

# Email Recipients
ALERT_RECIPIENTS=admin@company.com,ops@company.com
NOTIFICATION_RECIPIENTS=team@company.com
ERROR_RECIPIENTS=errors@company.com

# Email Templates
EMAIL_TEMPLATES_DIR=templates/email
ENABLE_HTML_EMAIL=true
EMAIL_SUBJECT_PREFIX=[OP-Trading]

# ================================
# MARKET CONFIGURATION
# ================================

# Market Data Settings
SUPPORTED_INDICES=NIFTY,BANKNIFTY,SENSEX,FINNIFTY,MIDCPNIFTY
DEFAULT_BUCKETS=this_week,next_week,this_month,next_month
DEFAULT_STRIKE_OFFSETS=-2,-1,0,1,2
EXTENDED_STRIKE_OFFSETS=-5,-4,-3,-2,-1,0,1,2,3,4,5

# Market Timing (IST)
MARKET_PRE_OPEN_TIME=09:00
MARKET_OPEN_TIME=09:15
MARKET_CLOSE_TIME=15:30
MARKET_POST_CLOSE_TIME=16:00

# Market Data Quality
DATA_QUALITY_ENABLED=true
MIN_DATA_QUALITY_SCORE=70
OUTLIER_DETECTION_ENABLED=true
PRICE_VALIDATION_ENABLED=true
VOLUME_VALIDATION_ENABLED=true

# ================================
# ANALYTICS CONFIGURATION
# ================================

# Options Analytics
ENABLE_GREEKS_CALCULATION=true
ENABLE_IV_CALCULATION=true
ENABLE_VOLATILITY_SURFACE=true
ENABLE_PCR_ANALYSIS=true
ENABLE_MAX_PAIN_CALCULATION=true
ENABLE_SENTIMENT_ANALYSIS=true

# Risk-Free Rate (for Black-Scholes)
RISK_FREE_RATE=0.06
DIVIDEND_YIELD=0.01

# Advanced Analytics
ENABLE_VIX_CORRELATION=true
ENABLE_SECTOR_BREADTH=true
ENABLE_FII_ANALYSIS=true
ENABLE_DII_ANALYSIS=true
ENABLE_OPTION_FLOW_ANALYSIS=true

# Machine Learning (Optional)
ENABLE_ML_MODELS=false
ML_MODEL_PATH=models/
ML_RETRAIN_INTERVAL_HOURS=24
ML_PREDICTION_CONFIDENCE_THRESHOLD=0.8

# ================================
# GRAFANA & VISUALIZATION CONFIGURATION
# ================================

# Grafana Settings
GRAFANA_URL=http://localhost:3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin
GRAFANA_ORG_ID=1
GRAFANA_API_KEY=your_grafana_api_key

# Dashboard Settings
GRAFANA_DASHBOARDS_DIR=infrastructure/grafana/dashboards
ENABLE_DASHBOARD_PROVISIONING=true
DASHBOARD_REFRESH_INTERVAL=30s
DASHBOARD_TIME_RANGE=6h

# ================================
# PROMETHEUS METRICS CONFIGURATION
# ================================

# Prometheus Settings
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_JOB_NAME=op-trading
PROMETHEUS_INSTANCE=localhost:8000
ENABLE_PROMETHEUS_METRICS=true

# Metrics Settings
METRICS_PORT=8080
METRICS_PATH=/metrics
COLLECT_SYSTEM_METRICS=true
COLLECT_APPLICATION_METRICS=true
COLLECT_BUSINESS_METRICS=true

# ================================
# CONTAINER & DEPLOYMENT CONFIGURATION
# ================================

# Docker Settings
DOCKER_IMAGE_TAG=latest
DOCKER_BUILD_TARGET=production
DOCKER_NETWORK=op-network
DOCKER_COMPOSE_PROJECT_NAME=op-trading

# Kubernetes Settings
K8S_NAMESPACE=op-trading
K8S_DEPLOYMENT_NAME=op-trading
K8S_SERVICE_ACCOUNT=op-trading-sa
K8S_CONFIG_MAP=op-config
K8S_SECRET_NAME=op-secrets

# Load Balancer Settings
ENABLE_LOAD_BALANCER=false
LB_ALGORITHM=round_robin
LB_HEALTH_CHECK_INTERVAL=30
LB_MAX_RETRIES=3

# ================================
# SECURITY CONFIGURATION
# ================================

# General Security
SECURITY_ENABLED=true
ENCRYPT_SENSITIVE_DATA=true
ENCRYPTION_KEY=your_32_char_encryption_key_here
HASH_ALGORITHM=sha256
SALT_ROUNDS=12

# Authentication & Authorization
AUTH_ENABLED=true
JWT_SECRET=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
ENABLE_API_KEYS=true
API_KEY_LENGTH=32

# Network Security
ALLOWED_HOSTS=localhost,127.0.0.1,api.your-domain.com
TRUSTED_PROXIES=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
ENABLE_HTTPS=false
SSL_CERT_PATH=
SSL_KEY_PATH=

# Data Security
ENABLE_DATA_ENCRYPTION_AT_REST=false
DATA_RETENTION_DAYS=365
SECURE_DELETE_ENABLED=true
AUDIT_LOG_ENABLED=true

# ================================
# DEVELOPMENT & TESTING CONFIGURATION
# ================================

# Development Settings
DEVELOPMENT_MODE=false
ENABLE_DEBUG_MODE=false
ENABLE_PROFILING=false
PROFILE_OUTPUT_DIR=profiles/
HOT_RELOAD=false

# Testing Configuration
TEST_DATA_DIR=tests/test_data
MOCK_BROKER_API=false
MOCK_DATABASE=false
MOCK_REDIS=false
ENABLE_INTEGRATION_TESTS=true
ENABLE_PERFORMANCE_TESTS=false
ENABLE_CHAOS_TESTING=false

# Test Database Settings
TEST_INFLUXDB_URL=http://localhost:8087
TEST_REDIS_HOST=localhost
TEST_REDIS_PORT=6380
TEST_DATA_CLEANUP=true

# ================================
# LOGGING CONFIGURATION
# ================================

# Logging Levels
ROOT_LOG_LEVEL=INFO
SERVICE_LOG_LEVEL=INFO
API_LOG_LEVEL=INFO
ANALYTICS_LOG_LEVEL=INFO
COLLECTION_LOG_LEVEL=INFO
PROCESSING_LOG_LEVEL=INFO
MONITORING_LOG_LEVEL=INFO

# Logging Output
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_FILE_PATH=logs/op-trading.log
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_BACKUP_COUNT=10
LOG_ROTATION=daily

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_FORMAT=json
INCLUDE_TRACE_ID=true
INCLUDE_REQUEST_ID=true

# Log Aggregation (Optional)
ENABLE_LOG_AGGREGATION=false
LOG_AGGREGATION_URL=http://localhost:5000
LOG_AGGREGATION_API_KEY=

# ================================
# BACKUP & RECOVERY CONFIGURATION
# ================================

# Backup Settings
ENABLE_AUTOMATED_BACKUP=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=false

# Recovery Settings
ENABLE_POINT_IN_TIME_RECOVERY=true
RECOVERY_LOG_RETENTION_DAYS=7
AUTO_RECOVERY_ENABLED=false
RECOVERY_VERIFICATION_ENABLED=true

# Cloud Backup (Optional)
CLOUD_BACKUP_ENABLED=false
CLOUD_BACKUP_PROVIDER=aws
CLOUD_BACKUP_BUCKET=
CLOUD_BACKUP_REGION=
CLOUD_BACKUP_ACCESS_KEY=
CLOUD_BACKUP_SECRET_KEY=

# ================================
# EXTERNAL SERVICE INTEGRATIONS
# ================================

# Market Data Providers (Optional)
YAHOO_FINANCE_ENABLED=false
ALPHA_VANTAGE_API_KEY=
QUANDL_API_KEY=
NSE_API_ENABLED=false
BSE_API_ENABLED=false

# News & Sentiment Data (Optional)
NEWS_API_KEY=
TWITTER_API_KEY=
TWITTER_API_SECRET=
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# External Analytics (Optional)
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=
AMPLITUDE_API_KEY=

# ================================
# FEATURE FLAGS
# ================================

# Core Features
FEATURE_REAL_TIME_COLLECTION=true
FEATURE_HISTORICAL_ANALYSIS=true
FEATURE_PREDICTIVE_ANALYTICS=false
FEATURE_AUTOMATED_TRADING=false
FEATURE_PORTFOLIO_MANAGEMENT=false

# Advanced Features
FEATURE_MACHINE_LEARNING=false
FEATURE_SENTIMENT_ANALYSIS=true
FEATURE_TECHNICAL_INDICATORS=true
FEATURE_BACKTESTING=false
FEATURE_PAPER_TRADING=false

# Experimental Features
FEATURE_EXPERIMENTAL_ANALYTICS=false
FEATURE_BETA_API_ENDPOINTS=false
FEATURE_ADVANCED_VISUALIZATIONS=true
FEATURE_MOBILE_NOTIFICATIONS=false

# ================================
# PLATFORM-SPECIFIC CONFIGURATION
# ================================

# Windows-specific settings
WINDOWS_SERVICE_NAME=OPTradingPlatform
WINDOWS_SERVICE_DESCRIPTION=OP Trading Platform Service
WINDOWS_LOG_EVENT_SOURCE=OPTrading

# Linux-specific settings
SYSTEMD_SERVICE_NAME=op-trading
SYSTEMD_USER=optrading
SYSTEMD_GROUP=optrading
PID_FILE=/var/run/op-trading.pid

# macOS-specific settings
MACOS_LAUNCH_AGENT=com.optrading.platform
MACOS_LOG_PATH=/usr/local/var/log/op-trading

# ================================
# MISCELLANEOUS CONFIGURATION
# ================================

# Timezone Settings
TIMEZONE=Asia/Kolkata
DATE_FORMAT=%Y-%m-%d
TIME_FORMAT=%H:%M:%S
DATETIME_FORMAT=%Y-%m-%d %H:%M:%S

# Locale Settings
LOCALE=en_IN
CURRENCY=INR
NUMBER_FORMAT=en_IN

# Cache Settings
ENABLE_CACHING=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=300

# Rate Limiting
GLOBAL_RATE_LIMIT=1000
PER_USER_RATE_LIMIT=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_STORAGE=redis

# Session Management
SESSION_TIMEOUT=3600
SESSION_CLEANUP_INTERVAL=300
MAX_CONCURRENT_SESSIONS=10

# File Upload Settings (if needed)
MAX_UPLOAD_SIZE=100MB
ALLOWED_FILE_TYPES=.csv,.json,.xlsx
UPLOAD_PATH=uploads/
VIRUS_SCANNING_ENABLED=false

# ================================
# CUSTOM APPLICATION SETTINGS
# ================================

# Add your custom application-specific settings here
CUSTOM_SETTING_1=value1
CUSTOM_SETTING_2=value2

# Application Metadata
APPLICATION_NAME=OP Trading Platform
APPLICATION_VERSION=1.0.0
APPLICATION_AUTHOR=Your Name
APPLICATION_EMAIL=your.email@domain.com
APPLICATION_URL=https://your-domain.com
APPLICATION_LICENSE=MIT

# ================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ================================

# These will be overridden by environment-specific .env files
# .env.development, .env.staging, .env.production

# Development overrides (uncomment for development)
# DEBUG=true
# LOG_LEVEL=DEBUG
# MOCK_BROKER_API=true
# ENABLE_HOT_RELOAD=true

# Production overrides (uncomment for production)
# DEBUG=false
# LOG_LEVEL=INFO
# ENABLE_SECURITY=true
# USE_HTTPS=true
# ENABLE_MONITORING=true